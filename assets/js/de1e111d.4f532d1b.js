"use strict";(self.webpackChunkyuanyp_8_dochub=self.webpackChunkyuanyp_8_dochub||[]).push([[183],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var i=a.createContext({}),s=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(i.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,o=e.originalType,i=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),m=s(n),h=l,u=m["".concat(i,".").concat(h)]||m[h]||d[h]||o;return n?a.createElement(u,r(r({ref:t},c),{},{components:n})):a.createElement(u,r({ref:t},c))}));function h(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var o=n.length,r=new Array(o);r[0]=m;var p={};for(var i in t)hasOwnProperty.call(t,i)&&(p[i]=t[i]);p.originalType=e,p.mdxType="string"==typeof e?e:l,r[1]=p;for(var s=2;s<o;s++)r[s]=n[s];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(7294),l=n(6010);const o="tabItem_Ymn6";function r(e){let{children:t,hidden:n,className:r}=e;return a.createElement("div",{role:"tabpanel",className:(0,l.Z)(o,r),hidden:n},t)}},5488:(e,t,n)=>{n.d(t,{Z:()=>h});var a=n(7462),l=n(7294),o=n(6010),r=n(2389),p=n(7392),i=n(7094),s=n(2466);const c="tabList__CuJ",d="tabItem_LNqP";function m(e){var t,n;const{lazy:r,block:m,defaultValue:h,values:u,groupId:k,className:C}=e,N=l.Children.map(e.children,(e=>{if((0,l.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),g=null!=u?u:N.map((e=>{let{props:{value:t,label:n,attributes:a}}=e;return{value:t,label:n,attributes:a}})),A=(0,p.l)(g,((e,t)=>e.value===t.value));if(A.length>0)throw new Error('Docusaurus error: Duplicate values "'+A.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.');const T=null===h?h:null!=(t=null!=h?h:null==(n=N.find((e=>e.props.default)))?void 0:n.props.value)?t:N[0].props.value;if(null!==T&&!g.some((e=>e.value===T)))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+T+'" but none of its children has the corresponding value. Available values are: '+g.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");const{tabGroupChoices:f,setTabGroupChoices:v}=(0,i.U)(),[b,H]=(0,l.useState)(T),O=[],{blockElementScrollPositionUntilNextRender:P}=(0,s.o5)();if(null!=k){const e=f[k];null!=e&&e!==b&&g.some((t=>t.value===e))&&H(e)}const w=e=>{const t=e.currentTarget,n=O.indexOf(t),a=g[n].value;a!==b&&(P(t),H(a),null!=k&&v(k,String(a)))},y=e=>{var t;let n=null;switch(e.key){case"ArrowRight":{var a;const t=O.indexOf(e.currentTarget)+1;n=null!=(a=O[t])?a:O[0];break}case"ArrowLeft":{var l;const t=O.indexOf(e.currentTarget)-1;n=null!=(l=O[t])?l:O[O.length-1];break}}null==(t=n)||t.focus()};return l.createElement("div",{className:(0,o.Z)("tabs-container",c)},l.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":m},C)},g.map((e=>{let{value:t,label:n,attributes:r}=e;return l.createElement("li",(0,a.Z)({role:"tab",tabIndex:b===t?0:-1,"aria-selected":b===t,key:t,ref:e=>O.push(e),onKeyDown:y,onFocus:w,onClick:w},r,{className:(0,o.Z)("tabs__item",d,null==r?void 0:r.className,{"tabs__item--active":b===t})}),null!=n?n:t)}))),r?(0,l.cloneElement)(N.filter((e=>e.props.value===b))[0],{className:"margin-top--md"}):l.createElement("div",{className:"margin-top--md"},N.map(((e,t)=>(0,l.cloneElement)(e,{key:t,hidden:e.props.value!==b})))))}function h(e){const t=(0,r.Z)();return l.createElement(m,(0,a.Z)({key:String(t)},e))}},8929:(e,t,n)=>{n.d(t,{y:()=>l});var a=n(7294);function l(e){let{children:t,color:n}=e;return a.createElement("span",{style:{backgroundColor:n,borderRadius:"2px",color:"#fff",padding:"0.2rem"}},t)}},4573:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>p,default:()=>m,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var a=n(7462),l=(n(7294),n(3905)),o=n(8929);n(5488),n(5162);const r={sidebar_position:11,slug:"cors",id:"cors",title:"\u8de8\u6e90\u8d44\u6e90\u5171\u4eab\uff08CORS\uff09",authors:["yuanyp8"],tags:["HTTP","protocol","\u8de8\u57df","CORS"]},p=void 0,i={unversionedId:"http/cors",id:"http/cors",title:"\u8de8\u6e90\u8d44\u6e90\u5171\u4eab\uff08CORS\uff09",description:"&nbsp;",source:"@site/docs/http/11-cors.md",sourceDirName:"http",slug:"/http/cors",permalink:"/docs/http/cors",draft:!1,editUrl:"https://github.com/yuanyp8/yuanyp8.github.io/tree/master/docs/http/11-cors.md",tags:[{label:"HTTP",permalink:"/docs/tags/http"},{label:"protocol",permalink:"/docs/tags/protocol"},{label:"\u8de8\u57df",permalink:"/docs/tags/\u8de8\u57df"},{label:"CORS",permalink:"/docs/tags/cors"}],version:"current",lastUpdatedBy:"yuanyp8",lastUpdatedAt:1658484189,formattedLastUpdatedAt:"2022\u5e747\u670822\u65e5",sidebarPosition:11,frontMatter:{sidebar_position:11,slug:"cors",id:"cors",title:"\u8de8\u6e90\u8d44\u6e90\u5171\u4eab\uff08CORS\uff09",authors:["yuanyp8"],tags:["HTTP","protocol","\u8de8\u57df","CORS"]},sidebar:"tutorialSidebar",previous:{title:"www \u6216\u975e www URL",permalink:"/docs/http/www"},next:{title:"auth",permalink:"/docs/http/auth"}},s={},c=[{value:"\u8c01\u5e94\u8be5\u8bfb\u8fd9\u7bc7\u6587\u7ae0\uff1f",id:"\u8c01\u5e94\u8be5\u8bfb\u8fd9\u7bc7\u6587\u7ae0",level:2},{value:"\u4ec0\u4e48\u60c5\u51b5\u4e0b\u9700\u8981 CORS \uff1f",id:"\u4ec0\u4e48\u60c5\u51b5\u4e0b\u9700\u8981-cors-",level:2},{value:"\u529f\u80fd\u6982\u8ff0",id:"\u529f\u80fd\u6982\u8ff0",level:2},{value:"\u82e5\u5e72\u8bbf\u95ee\u63a7\u5236\u573a\u666f",id:"\u82e5\u5e72\u8bbf\u95ee\u63a7\u5236\u573a\u666f",level:2},{value:"\u7b80\u5355\u8bf7\u6c42",id:"\u7b80\u5355\u8bf7\u6c42",level:3},{value:"\u9884\u68c0\u8bf7\u6c42",id:"\u9884\u68c0\u8bf7\u6c42",level:2},{value:"\u9644\u5e26\u8eab\u4efd\u51ed\u8bc1\u7684\u8bf7\u6c42",id:"\u9644\u5e26\u8eab\u4efd\u51ed\u8bc1\u7684\u8bf7\u6c42",level:3},{value:"\u9884\u68c0\u8bf7\u6c42\u548c\u51ed\u636e",id:"\u9884\u68c0\u8bf7\u6c42\u548c\u51ed\u636e",level:4},{value:"\u9644\u5e26\u8eab\u4efd\u51ed\u8bc1\u7684\u8bf7\u6c42\u4e0e\u901a\u914d\u7b26",id:"\u9644\u5e26\u8eab\u4efd\u51ed\u8bc1\u7684\u8bf7\u6c42\u4e0e\u901a\u914d\u7b26",level:4},{value:"\u7b2c\u4e09\u65b9 cookies",id:"\u7b2c\u4e09\u65b9-cookies",level:4},{value:"HTTP \u54cd\u5e94\u9996\u90e8\u5b57\u6bb5",id:"http-\u54cd\u5e94\u9996\u90e8\u5b57\u6bb5",level:2},{value:"Access-Control-Allow-Origin",id:"access-control-allow-origin",level:3},{value:"Access-Control-Expose-Headers",id:"access-control-expose-headers",level:3},{value:"Access-Control-Max-Age",id:"access-control-max-age",level:3},{value:"Access-Control-Allow-Credentials",id:"access-control-allow-credentials",level:3},{value:"Access-Control-Allow-Methods",id:"access-control-allow-methods",level:3},{value:"Access-Control-Allow-Headers",id:"access-control-allow-headers",level:3},{value:"HTTP \u8bf7\u6c42\u9996\u90e8\u5b57\u6bb5",id:"http-\u8bf7\u6c42\u9996\u90e8\u5b57\u6bb5",level:2},{value:"Origin",id:"origin",level:3},{value:"Access-Control-Request-Method",id:"access-control-request-method",level:3},{value:"Access-Control-Request-Headers",id:"access-control-request-headers",level:3},{value:"\u89c4\u8303",id:"\u89c4\u8303",level:2},{value:"\u6d4f\u89c8\u5668\u517c\u5bb9\u6027",id:"\u6d4f\u89c8\u5668\u517c\u5bb9\u6027",level:2}],d={toc:c};function m(e){let{components:t,...r}=e;return(0,l.kt)("wrapper",(0,a.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("img",{className:"Badges",src:"https://img.shields.io/badge/author-yuanyp8-yellowgreen"}),"\xa0",(0,l.kt)("img",{className:"Badges",src:"https://img.shields.io/badge/reference-mozilla-lightgrey"}),(0,l.kt)("br",null),"\xa0",(0,l.kt)("br",null),(0,l.kt)("p",null,"\u8de8\u6e90\u8d44\u6e90\u5171\u4eab (CORS)\uff08\u6216\u901a\u4fd7\u5730\u8bd1\u4e3a\u8de8\u57df\u8d44\u6e90\u5171\u4eab\uff09\u662f\u4e00\u79cd\u57fa\u4e8e HTTP \u5934\u7684\u673a\u5236\uff0c\u8be5\u673a\u5236\u901a\u8fc7\u5141\u8bb8\u670d\u52a1\u5668\u6807\u793a\u9664\u4e86\u5b83\u81ea\u5df1\u4ee5\u5916\u7684\u5176\u5b83 ",(0,l.kt)("inlineCode",{parentName:"p"},"origin"),"\uff08\u57df\uff0c\u534f\u8bae\u548c\u7aef\u53e3\uff09\uff0c\u4f7f\u5f97\u6d4f\u89c8\u5668\u5141\u8bb8\u8fd9\u4e9b origin \u8bbf\u95ee\u52a0\u8f7d\u81ea\u5df1\u7684\u8d44\u6e90\u3002\u8de8\u6e90\u8d44\u6e90\u5171\u4eab\u8fd8\u901a\u8fc7\u4e00\u79cd\u673a\u5236\u6765\u68c0\u67e5\u670d\u52a1\u5668\u662f\u5426\u4f1a\u5141\u8bb8\u8981\u53d1\u9001\u7684\u771f\u5b9e\u8bf7\u6c42\uff0c\u8be5\u673a\u5236\u901a\u8fc7\u6d4f\u89c8\u5668\u53d1\u8d77\u4e00\u4e2a\u5230\u670d\u52a1\u5668\u6258\u7ba1\u7684\u8de8\u6e90\u8d44\u6e90\u7684",(0,l.kt)("strong",{parentName:"p"},"\u9884\u68c0"),"\u8bf7\u6c42\u3002"),(0,l.kt)("p",null,"\u5728\u9884\u68c0\u4e2d\uff0c\u6d4f\u89c8\u5668\u53d1\u9001\u7684\u5934\u4e2d\u6807\u793a\u6709 HTTP \u65b9\u6cd5\u548c\u771f\u5b9e\u8bf7\u6c42\u4e2d\u4f1a\u7528\u5230\u7684\u5934\u3002"),(0,l.kt)("p",null,"\u8de8\u6e90 HTTP \u8bf7\u6c42\u7684\u4e00\u4e2a\u4f8b\u5b50\uff1a\u8fd0\u884c\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"https://domain-a.com")," \u7684 JavaScript \u4ee3\u7801\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest"},(0,l.kt)("inlineCode",{parentName:"a"},"XMLHttpRequest"))," \u6765\u53d1\u8d77\u4e00\u4e2a\u5230 ",(0,l.kt)("inlineCode",{parentName:"p"},"https://domain-b.com/data.json")," \u7684\u8bf7\u6c42\u3002"),(0,l.kt)("p",null,"\u51fa\u4e8e\u5b89\u5168\u6027\uff0c\u6d4f\u89c8\u5668\u9650\u5236\u811a\u672c\u5185\u53d1\u8d77\u7684\u8de8\u6e90 HTTP \u8bf7\u6c42\u3002 \u4f8b\u5982\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"XMLHttpRequest")," \u548c ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API"},"Fetch API")," \u9075\u5faa",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy"},"\u540c\u6e90\u7b56\u7565"),"\u3002\u8fd9\u610f\u5473\u7740\u4f7f\u7528\u8fd9\u4e9b API \u7684 Web \u5e94\u7528\u7a0b\u5e8f\u53ea\u80fd\u4ece\u52a0\u8f7d\u5e94\u7528\u7a0b\u5e8f\u7684\u540c\u4e00\u4e2a\u57df\u8bf7\u6c42 HTTP \u8d44\u6e90\uff0c\u9664\u975e\u54cd\u5e94\u62a5\u6587\u5305\u542b\u4e86\u6b63\u786e CORS \u54cd\u5e94\u5934\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"img",src:n(7118).Z,width:"925",height:"643"})),(0,l.kt)("p",null,"\u8de8\u6e90\u57df\u8d44\u6e90\u5171\u4eab\uff08",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Glossary/CORS"},"CORS"),"\uff09\u673a\u5236\u5141\u8bb8 Web \u5e94\u7528\u670d\u52a1\u5668\u8fdb\u884c\u8de8\u6e90\u8bbf\u95ee\u63a7\u5236\uff0c\u4ece\u800c\u4f7f\u8de8\u6e90\u6570\u636e\u4f20\u8f93\u5f97\u4ee5\u5b89\u5168\u8fdb\u884c\u3002\u73b0\u4ee3\u6d4f\u89c8\u5668\u652f\u6301\u5728 API \u5bb9\u5668\u4e2d\uff08\u4f8b\u5982 ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest"},(0,l.kt)("inlineCode",{parentName:"a"},"XMLHttpRequest"))," \u6216 ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API"},"Fetch"),"\uff09\u4f7f\u7528 CORS\uff0c\u4ee5\u964d\u4f4e\u8de8\u6e90 HTTP \u8bf7\u6c42\u6240\u5e26\u6765\u7684\u98ce\u9669\u3002"),(0,l.kt)("h2",{id:"\u8c01\u5e94\u8be5\u8bfb\u8fd9\u7bc7\u6587\u7ae0"},"\u8c01\u5e94\u8be5\u8bfb\u8fd9\u7bc7\u6587\u7ae0\uff1f"),(0,l.kt)(o.y,{color:"#25c2a0",mdxType:"Highlight"},"\u8bf4\u5b9e\u8bdd\uff0c\u6bcf\u4e2a\u4eba"),(0,l.kt)("p",null,"\u66f4\u5177\u4f53\u5730\u6765\u8bb2\uff0c\u8fd9\u7bc7\u6587\u7ae0\u9002\u7528\u4e8e ",(0,l.kt)("strong",{parentName:"p"},"\u7f51\u7ad9\u7ba1\u7406\u5458"),"\u3001",(0,l.kt)("strong",{parentName:"p"},"\u540e\u7aef\u548c\u524d\u7aef\u5f00\u53d1\u8005"),"\u3002\u73b0\u4ee3\u6d4f\u89c8\u5668\u5904\u7406\u8de8\u6e90\u8d44\u6e90\u5171\u4eab\u7684\u5ba2\u6237\u7aef\u90e8\u5206\uff0c\u5305\u62ec HTTP \u5934\u548c\u76f8\u5173\u7b56\u7565\u7684\u6267\u884c\u3002\u4f46\u662f\u8fd9\u4e00\u65b0\u6807\u51c6\u610f\u5473\u7740\u670d\u52a1\u5668\u9700\u8981\u5904\u7406\u65b0\u7684\u8bf7\u6c42\u5934\u548c\u54cd\u5e94\u5934\u3002"),(0,l.kt)("h2",{id:"\u4ec0\u4e48\u60c5\u51b5\u4e0b\u9700\u8981-cors-"},"\u4ec0\u4e48\u60c5\u51b5\u4e0b\u9700\u8981 CORS \uff1f"),(0,l.kt)("p",null,"\u8fd9\u4efd ",(0,l.kt)("a",{parentName:"p",href:"https://fetch.spec.whatwg.org/#http-cors-protocol"},"cross-origin sharing standard")," \u5141\u8bb8\u5728\u4e0b\u5217\u573a\u666f\u4e2d\u4f7f\u7528\u8de8\u7ad9\u70b9 HTTP \u8bf7\u6c42\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u524d\u6587\u63d0\u5230\u7684\u7531 ",(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest"},(0,l.kt)("inlineCode",{parentName:"a"},"XMLHttpRequest"))," \u6216 ",(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API"},"Fetch APIs")," \u53d1\u8d77\u7684\u8de8\u6e90 HTTP \u8bf7\u6c42\u3002"),(0,l.kt)("li",{parentName:"ul"},"Web \u5b57\u4f53 (CSS \u4e2d\u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"li"},"@font-face")," \u4f7f\u7528\u8de8\u6e90\u5b57\u4f53\u8d44\u6e90)\uff0c",(0,l.kt)("a",{parentName:"li",href:"https://www.w3.org/TR/css-fonts-3/#font-fetching-requirements"},"\u56e0\u6b64\uff0c\u7f51\u7ad9\u5c31\u53ef\u4ee5\u53d1\u5e03 TrueType \u5b57\u4f53\u8d44\u6e90\uff0c\u5e76\u53ea\u5141\u8bb8\u5df2\u6388\u6743\u7f51\u7ad9\u8fdb\u884c\u8de8\u7ad9\u8c03\u7528"),"\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/WebGL_API/Tutorial/Using_textures_in_WebGL"},"WebGL \u8d34\u56fe")),(0,l.kt)("li",{parentName:"ul"},"\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/drawImage"},(0,l.kt)("inlineCode",{parentName:"a"},"drawImage"))," \u5c06 Images/video \u753b\u9762\u7ed8\u5236\u5230 canvas\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Shapes/Shapes_From_Images"},"\u6765\u81ea\u56fe\u50cf\u7684 CSS \u56fe\u5f62"))),(0,l.kt)("p",null,"\u672c\u6587\u6982\u8ff0\u4e86\u8de8\u6e90\u8d44\u6e90\u5171\u4eab\u673a\u5236\u53ca\u5176\u6240\u6d89\u53ca\u7684 HTTP \u5934\u3002"),(0,l.kt)("h2",{id:"\u529f\u80fd\u6982\u8ff0"},"\u529f\u80fd\u6982\u8ff0"),(0,l.kt)("p",null,"\u8de8\u6e90\u8d44\u6e90\u5171\u4eab\u6807\u51c6\u65b0\u589e\u4e86\u4e00\u7ec4 ",(0,l.kt)("inlineCode",{parentName:"p"},"HTTP "),"\u9996\u90e8\u5b57\u6bb5\uff0c\u5141\u8bb8\u670d\u52a1\u5668\u58f0\u660e\u54ea\u4e9b\u6e90\u7ad9\u901a\u8fc7\u6d4f\u89c8\u5668\u6709\u6743\u9650\u8bbf\u95ee\u54ea\u4e9b\u8d44\u6e90\u3002\u53e6\u5916\uff0c\u89c4\u8303\u8981\u6c42\uff0c\u5bf9\u90a3\u4e9b\u53ef\u80fd\u5bf9\u670d\u52a1\u5668\u6570\u636e\u4ea7\u751f\u526f\u4f5c\u7528\u7684 HTTP \u8bf7\u6c42\u65b9\u6cd5\uff08\u7279\u522b\u662f ",(0,l.kt)("inlineCode",{parentName:"p"},"GET")," \u4ee5\u5916\u7684",(0,l.kt)("inlineCode",{parentName:"p"}," HTTP")," \u8bf7\u6c42\uff0c\u6216\u8005\u642d\u914d\u67d0\u4e9b ",(0,l.kt)("inlineCode",{parentName:"p"},"MIME "),"\u7c7b\u578b \u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"POST")," \u8bf7\u6c42\uff09\uff0c\u6d4f\u89c8\u5668\u5fc5\u987b\u9996\u5148\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"OPTIONS")," \u65b9\u6cd5\u53d1\u8d77\u4e00\u4e2a\u9884\u68c0\u8bf7\u6c42\uff08",(0,l.kt)("inlineCode",{parentName:"p"},"preflight request"),"\uff09\uff0c\u4ece\u800c\u83b7\u77e5\u670d\u52a1\u7aef\u662f\u5426\u5141\u8bb8\u8be5\u8de8\u6e90\u8bf7\u6c42\u3002\u670d\u52a1\u5668\u786e\u8ba4\u5141\u8bb8\u4e4b\u540e\uff0c\u624d\u53d1\u8d77\u5b9e\u9645\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"HTTP")," \u8bf7\u6c42\u3002\u5728\u9884\u68c0\u8bf7\u6c42\u7684\u8fd4\u56de\u4e2d\uff0c\u670d\u52a1\u5668\u7aef\u4e5f\u53ef\u4ee5\u901a\u77e5\u5ba2\u6237\u7aef\uff0c\u662f\u5426\u9700\u8981\u643a\u5e26\u8eab\u4efd\u51ed\u8bc1\uff08\u5305\u62ec ",(0,l.kt)("inlineCode",{parentName:"p"},"Cookies")," \u548c ",(0,l.kt)("inlineCode",{parentName:"p"},"HTTP")," \u8ba4\u8bc1 \u76f8\u5173\u6570\u636e\uff09\u3002"),(0,l.kt)("p",null,"CORS \u8bf7\u6c42\u5931\u8d25\u4f1a\u4ea7\u751f\u9519\u8bef\uff0c\u4f46\u662f\u4e3a\u4e86\u5b89\u5168\uff0c\u5728 JavaScript \u4ee3\u7801\u5c42\u9762\u662f\u65e0\u6cd5\u83b7\u77e5\u5230\u5e95\u5177\u4f53\u662f\u54ea\u91cc\u51fa\u4e86\u95ee\u9898\u3002\u4f60\u53ea\u80fd\u67e5\u770b\u6d4f\u89c8\u5668\u7684\u63a7\u5236\u53f0\u4ee5\u5f97\u77e5\u5177\u4f53\u662f\u54ea\u91cc\u51fa\u73b0\u4e86\u9519\u8bef\u3002"),(0,l.kt)("p",null,"\u63a5\u4e0b\u6765\u7684\u5185\u5bb9\u5c06\u8ba8\u8bba\u76f8\u5173\u573a\u666f\uff0c\u5e76\u5256\u6790\u8be5\u673a\u5236\u6240\u6d89\u53ca\u7684 HTTP \u9996\u90e8\u5b57\u6bb5\u3002"),(0,l.kt)("h2",{id:"\u82e5\u5e72\u8bbf\u95ee\u63a7\u5236\u573a\u666f"},"\u82e5\u5e72\u8bbf\u95ee\u63a7\u5236\u573a\u666f"),(0,l.kt)("p",null,"\u8fd9\u91cc\uff0c\u6211\u4eec\u4f7f\u7528\u4e09\u4e2a\u573a\u666f\u6765\u89e3\u91ca\u8de8\u6e90\u8d44\u6e90\u5171\u4eab\u673a\u5236\u7684\u5de5\u4f5c\u539f\u7406\u3002\u8fd9\u4e9b\u4f8b\u5b50\u90fd\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest"},(0,l.kt)("inlineCode",{parentName:"a"},"XMLHttpRequest"))," \u5bf9\u8c61\u3002"),(0,l.kt)("h3",{id:"\u7b80\u5355\u8bf7\u6c42"},"\u7b80\u5355\u8bf7\u6c42"),(0,l.kt)("p",null,"\u67d0\u4e9b\u8bf7\u6c42\u4e0d\u4f1a\u89e6\u53d1 ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Glossary/Preflight_request"},"CORS \u9884\u68c0\u8bf7\u6c42"),"\u3002\u672c\u6587\u79f0\u8fd9\u6837\u7684\u8bf7\u6c42\u4e3a\u201c\u7b80\u5355\u8bf7\u6c42\u201d\uff0c\u8bf7\u6ce8\u610f\uff0c\u8be5\u672f\u8bed\u5e76\u4e0d\u5c5e\u4e8e ",(0,l.kt)("a",{parentName:"p",href:"https://fetch.spec.whatwg.org/"},"Fetch"),"\uff08\u5176\u4e2d\u5b9a\u4e49\u4e86 CORS\uff09\u89c4\u8303\u3002\u82e5\u8bf7\u6c42 ",(0,l.kt)("strong",{parentName:"p"},"\u6ee1\u8db3\u6240\u6709\u4e0b\u8ff0\u6761\u4ef6"),"\uff0c\u5219\u8be5\u8bf7\u6c42\u53ef\u89c6\u4e3a\u201c\u7b80\u5355\u8bf7\u6c42\u201d\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u4e0b\u5217\u65b9\u6cd5\u4e4b\u4e00\uff1a",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"GET")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"HEAD")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"POST")))),(0,l.kt)("li",{parentName:"ul"},"\u9664\u4e86\u88ab\u7528\u6237\u4ee3\u7406\u81ea\u52a8\u8bbe\u7f6e\u7684\u9996\u90e8\u5b57\u6bb5\uff08\u4f8b\u5982",(0,l.kt)("inlineCode",{parentName:"li"},"Connection"),"\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"User-Agent"),"\uff09\u548c\u5728 Fetch \u89c4\u8303\u4e2d\u5b9a\u4e49\u4e3a\u7981\u7528\u9996\u90e8\u540d\u79f0 \u7684\u5176\u4ed6\u9996\u90e8\uff0c\u5141\u8bb8\u4eba\u4e3a\u8bbe\u7f6e\u7684\u5b57\u6bb5\u4e3a Fetch \u89c4\u8303\u5b9a\u4e49\u7684\u5bf9 CORS \u5b89\u5168\u7684\u9996\u90e8\u5b57\u6bb5\u96c6\u5408\uff0c\u8be5\u96c6\u5408\u4e3a\uff1a",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Accept")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Accept-Language")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Content-Language"),"]"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Content-Type"),"\uff08\u9700\u8981\u6ce8\u610f\u989d\u5916\u7684\u9650\u5236\uff09"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Content-Type"),"\u7684\u503c\u4ec5\u9650\u4e8e\u4e0b\u5217\u4e09\u8005\u4e4b\u4e00\uff1a",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"text/plain")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"multipart/form-data")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"application/x-www-form-urlencoded")))),(0,l.kt)("li",{parentName:"ul"},"\u8bf7\u6c42\u4e2d\u7684\u4efb\u610f ",(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest"},(0,l.kt)("inlineCode",{parentName:"a"},"XMLHttpRequest"))," \u5bf9\u8c61\u5747\u6ca1\u6709\u6ce8\u518c\u4efb\u4f55\u4e8b\u4ef6\u76d1\u542c\u5668\uff1b",(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest"},(0,l.kt)("inlineCode",{parentName:"a"},"XMLHttpRequest"))," \u5bf9\u8c61\u53ef\u4ee5\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/upload"},(0,l.kt)("inlineCode",{parentName:"a"},"XMLHttpRequest.upload"))," \u5c5e\u6027\u8bbf\u95ee\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u8bf7\u6c42\u4e2d\u6ca1\u6709\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/ReadableStream"},(0,l.kt)("inlineCode",{parentName:"a"},"ReadableStream"))," \u5bf9\u8c61\u3002")),(0,l.kt)("p",null,"\u6bd4\u5982\u8bf4\uff0c\u5047\u5982\u7ad9\u70b9 ",(0,l.kt)("inlineCode",{parentName:"p"},"https://foo.example")," \u7684\u7f51\u9875\u5e94\u7528\u60f3\u8981\u8bbf\u95ee ",(0,l.kt)("inlineCode",{parentName:"p"},"https://bar.other")," \u7684\u8d44\u6e90\u3002",(0,l.kt)("inlineCode",{parentName:"p"},"foo.example")," \u7684\u7f51\u9875\u4e2d\u53ef\u80fd\u5305\u542b\u7c7b\u4f3c\u4e8e\u4e0b\u9762\u7684 JavaScript \u4ee3\u7801\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"const xhr = new XMLHttpRequest();\nconst url = 'https://bar.other/resources/public-data/';\n\nxhr.open('GET', url);\nxhr.onreadystatechange = someHandler;\nxhr.send();\n")),(0,l.kt)("p",null,"\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u4f7f\u7528 CORS \u9996\u90e8\u5b57\u6bb5\u6765\u5904\u7406\u6743\u9650\uff1a"),(0,l.kt)("p",null,"\u4ee5\u4e0b\u662f\u6d4f\u89c8\u5668\u53d1\u9001\u7ed9\u670d\u52a1\u5668\u7684\u8bf7\u6c42\u62a5\u6587\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-http"},"GET /resources/public-data/ HTTP/1.1\nHost: bar.other\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.14; rv:71.0) Gecko/20100101 Firefox/71.0\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nAccept-Language: en-us,en;q=0.5\nAccept-Encoding: gzip,deflate\nConnection: keep-alive\nOrigin: https://foo.example\n")),(0,l.kt)("p",null,"\u8bf7\u6c42\u9996\u90e8\u5b57\u6bb5 ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Origin"},(0,l.kt)("inlineCode",{parentName:"a"},"Origin"))," \u8868\u660e\u8be5\u8bf7\u6c42\u6765\u6e90\u4e8e ",(0,l.kt)("inlineCode",{parentName:"p"},"http://foo.example"),"\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"HTTP/1.1 200 OK\nDate: Mon, 01 Dec 2008 00:23:53 GMT\nServer: Apache/2\nAccess-Control-Allow-Origin: *\nKeep-Alive: timeout=2, max=100\nConnection: Keep-Alive\nTransfer-Encoding: chunked\nContent-Type: application/xml\n\n[XML Data]\n")),(0,l.kt)("p",null,"\u672c\u4f8b\u4e2d\uff0c\u670d\u52a1\u7aef\u8fd4\u56de\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"Access-Control-Allow-Origin: *")," \u8868\u660e\uff0c\u8be5\u8d44\u6e90\u53ef\u4ee5\u88ab ",(0,l.kt)("strong",{parentName:"p"},"\u4efb\u610f")," \u5916\u57df\u8bbf\u95ee\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"Access-Control-Allow-Origin: *\n")),(0,l.kt)("p",null,"\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"Origin"),"\u548c ",(0,l.kt)("inlineCode",{parentName:"p"},"Access-Control-Allow-Origin"),"\u5c31\u80fd\u5b8c\u6210\u6700\u7b80\u5355\u7684\u8bbf\u95ee\u63a7\u5236\u3002\u5982\u679c\u670d\u52a1\u7aef\u4ec5\u5141\u8bb8\u6765\u81ea ",(0,l.kt)("inlineCode",{parentName:"p"},"https://foo.example")," \u7684\u8bbf\u95ee\uff0c\u8be5\u9996\u90e8\u5b57\u6bb5\u7684\u5185\u5bb9\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"Access-Control-Allow-Origin: https://foo.example\n")),(0,l.kt)("p",null,"::: caution\n\u5f53\u54cd\u5e94\u7684\u662f",(0,l.kt)("strong",{parentName:"p"},"\u9644\u5e26\u8eab\u4efd\u51ed\u8bc1\u7684\u8bf7\u6c42"),"\u65f6\uff0c\u670d\u52a1\u7aef ",(0,l.kt)("strong",{parentName:"p"},"\u5fc5\u987b")," \u660e\u786e ",(0,l.kt)("inlineCode",{parentName:"p"},"Access-Control-Allow-Origin")," \u7684\u503c\uff0c\u800c\u4e0d\u80fd\u4f7f\u7528\u901a\u914d\u7b26",(0,l.kt)("inlineCode",{parentName:"p"},"*"),"\u3002\n:::"),(0,l.kt)("h2",{id:"\u9884\u68c0\u8bf7\u6c42"},"\u9884\u68c0\u8bf7\u6c42"),(0,l.kt)("p",null,"\u4e0e\u524d\u8ff0\u7b80\u5355\u8bf7\u6c42\u4e0d\u540c\uff0c\u201c\u9700\u9884\u68c0\u7684\u8bf7\u6c42\u201d\u8981\u6c42\u5fc5\u987b\u9996\u5148\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"OPTIONS"),' \u65b9\u6cd5\u53d1\u8d77\u4e00\u4e2a\u9884\u68c0\u8bf7\u6c42\u5230\u670d\u52a1\u5668\uff0c\u4ee5\u83b7\u77e5\u670d\u52a1\u5668\u662f\u5426\u5141\u8bb8\u8be5\u5b9e\u9645\u8bf7\u6c42\u3002"\u9884\u68c0\u8bf7\u6c42\u201c\u7684\u4f7f\u7528\uff0c\u53ef\u4ee5\u907f\u514d\u8de8\u57df\u8bf7\u6c42\u5bf9\u670d\u52a1\u5668\u7684\u7528\u6237\u6570\u636e\u4ea7\u751f\u672a\u9884\u671f\u7684\u5f71\u54cd\u3002'),(0,l.kt)("p",null,"\u5982\u4e0b\u662f\u4e00\u4e2a\u9700\u8981\u6267\u884c\u9884\u68c0\u8bf7\u6c42\u7684 HTTP \u8bf7\u6c42\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-http"},"const xhr = new XMLHttpRequest();\nxhr.open('POST', 'https://bar.other/resources/post-here/');\nxhr.setRequestHeader('X-PINGOTHER', 'pingpong');\nxhr.setRequestHeader('Content-Type', 'application/xml');\nxhr.onreadystatechange = handler;\nxhr.send('<person><name>Arun</name></person>');\n")),(0,l.kt)("p",null,"\u4e0a\u9762\u7684\u4ee3\u7801\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"POST")," \u8bf7\u6c42\u53d1\u9001\u4e00\u4e2a XML \u6587\u6863\uff0c\u8be5\u8bf7\u6c42\u5305\u542b\u4e86\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u8bf7\u6c42\u9996\u90e8\u5b57\u6bb5\uff08X-PINGOTHER: pingpong\uff09\u3002\u53e6\u5916\uff0c\u8be5\u8bf7\u6c42\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"Content-Type")," \u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"application/xml"),"\u3002\u56e0\u6b64\uff0c\u8be5\u8bf7\u6c42\u9700\u8981\u9996\u5148\u53d1\u8d77\u201c\u9884\u68c0\u8bf7\u6c42\u201d\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"img",src:n(2376).Z,width:"1024",height:"1076"})),(0,l.kt)("admonition",{title:"\u5907\u6ce8",type:"info"},(0,l.kt)("p",{parentName:"admonition"},"\u5982\u4e0b\u6240\u8ff0\uff0c\u5b9e\u9645\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"POST")," \u8bf7\u6c42\u4e0d\u4f1a\u643a\u5e26 ",(0,l.kt)("inlineCode",{parentName:"p"},"Access-Control-Request-*")," \u9996\u90e8\uff0c\u5b83\u4eec\u4ec5\u7528\u4e8e ",(0,l.kt)("inlineCode",{parentName:"p"},"OPTIONS")," \u8bf7\u6c42\u3002")),(0,l.kt)("p",null,"\u4e0b\u9762\u662f\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u5b8c\u6574\u7684\u4fe1\u606f\u4ea4\u4e92\u3002\u9996\u6b21\u4ea4\u4e92\u662f ",(0,l.kt)("em",{parentName:"p"},"\u9884\u68c0\u8bf7\u6c42/\u54cd\u5e94"),"\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-http"},"OPTIONS /doc HTTP/1.1\nHost: bar.other\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.14; rv:71.0) Gecko/20100101 Firefox/71.0\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nAccept-Language: en-us,en;q=0.5\nAccept-Encoding: gzip,deflate\nConnection: keep-alive\nOrigin: https://foo.example\n#highlight-start\nAccess-Control-Request-Method: POST\nAccess-Control-Request-Headers: X-PINGOTHER, Content-Type\n#highlight-end\nHTTP/1.1 204 No Content\nDate: Mon, 01 Dec 2008 01:15:39 GMT\nServer: Apache/2\n#highlight-start\nAccess-Control-Allow-Origin: https://foo.example\nAccess-Control-Allow-Methods: POST, GET, OPTIONS\nAccess-Control-Allow-Headers: X-PINGOTHER, Content-Type\nAccess-Control-Max-Age: 86400\n#highlight-end\nVary: Accept-Encoding, Origin\nKeep-Alive: timeout=2, max=100\nConnection: Keep-Alive\n")),(0,l.kt)("p",null,"\u6d4f\u89c8\u5668\u68c0\u6d4b\u5230\uff0c\u4ece JavaScript \u4e2d\u53d1\u8d77\u7684\u8bf7\u6c42\u9700\u8981\u88ab\u9884\u68c0\u3002\u4ece\u4e0a\u9762\u7684\u62a5\u6587\u4e2d\uff0c\u6211\u4eec\u770b\u5230\uff0c\u7b2c 1~10 \u884c\u53d1\u9001\u4e86\u4e00\u4e2a\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"OPTIONS")," \u65b9\u6cd5 \u7684\u201c\u9884\u68c0\u8bf7\u6c42\u201d\u3002OPTIONS \u662f HTTP/1.1 \u534f\u8bae\u4e2d\u5b9a\u4e49\u7684\u65b9\u6cd5\uff0c\u7528\u4ee5\u4ece\u670d\u52a1\u5668\u83b7\u53d6\u66f4\u591a\u4fe1\u606f\u3002\u8be5\u65b9\u6cd5\u4e0d\u4f1a\u5bf9\u670d\u52a1\u5668\u8d44\u6e90\u4ea7\u751f\u5f71\u54cd\u3002 \u9884\u68c0\u8bf7\u6c42\u4e2d\u540c\u65f6\u643a\u5e26\u4e86\u4e0b\u9762\u4e24\u4e2a\u9996\u90e8\u5b57\u6bb5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"Access-Control-Request-Method: POST\nAccess-Control-Request-Headers: X-PINGOTHER, Content-Type\n")),(0,l.kt)("p",null,"\u9996\u90e8\u5b57\u6bb5 ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Access-Control-Request-Method"},(0,l.kt)("inlineCode",{parentName:"a"},"Access-Control-Request-Method"))," \u544a\u77e5\u670d\u52a1\u5668\uff0c\u5b9e\u9645\u8bf7\u6c42\u5c06\u4f7f\u7528 POST \u65b9\u6cd5\u3002\u9996\u90e8\u5b57\u6bb5 ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Access-Control-Request-Headers"},(0,l.kt)("inlineCode",{parentName:"a"},"Access-Control-Request-Headers"))," \u544a\u77e5\u670d\u52a1\u5668\uff0c\u5b9e\u9645\u8bf7\u6c42\u5c06\u643a\u5e26\u4e24\u4e2a\u81ea\u5b9a\u4e49\u8bf7\u6c42\u9996\u90e8\u5b57\u6bb5\uff1a",(0,l.kt)("inlineCode",{parentName:"p"},"X-PINGOTHER")," \u4e0e ",(0,l.kt)("inlineCode",{parentName:"p"},"Content-Type"),"\u3002\u670d\u52a1\u5668\u636e\u6b64\u51b3\u5b9a\uff0c\u8be5\u5b9e\u9645\u8bf7\u6c42\u662f\u5426\u88ab\u5141\u8bb8\u3002"),(0,l.kt)("p",null,"\u7b2c 13~22 \u884c\u4e3a\u9884\u68c0\u8bf7\u6c42\u7684\u54cd\u5e94\uff0c\u8868\u660e\u670d\u52a1\u5668\u5c06\u63a5\u53d7\u540e\u7eed\u7684\u5b9e\u9645\u8bf7\u6c42\u3002\u91cd\u70b9\u770b\u7b2c 16~19 \u884c\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"Access-Control-Allow-Origin: https://foo.example\nAccess-Control-Allow-Methods: POST, GET, OPTIONS\nAccess-Control-Allow-Headers: X-PINGOTHER, Content-Type\nAccess-Control-Max-Age: 86400\n")),(0,l.kt)("p",null,"\u670d\u52a1\u5668\u7684\u54cd\u5e94\u643a\u5e26\u4e86 ",(0,l.kt)("inlineCode",{parentName:"p"},"Access-Control-Allow-Origin: https://foo.example"),"\uff0c\u4ece\u800c\u9650\u5236\u8bf7\u6c42\u7684\u6e90\u57df\u3002\u540c\u65f6\uff0c\u643a\u5e26\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"Access-Control-Allow-Methods")," \u8868\u660e\u670d\u52a1\u5668\u5141\u8bb8\u5ba2\u6237\u7aef\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"POST")," \u548c ",(0,l.kt)("inlineCode",{parentName:"p"},"GET")," \u65b9\u6cd5\u53d1\u8d77\u8bf7\u6c42\uff08\u4e0e ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Allow"},(0,l.kt)("inlineCode",{parentName:"a"},"Allow"))," \u54cd\u5e94\u9996\u90e8\u7c7b\u4f3c\uff0c\u4f46\u5176\u5177\u6709\u4e25\u683c\u7684\u8bbf\u95ee\u63a7\u5236\uff09\u3002"),(0,l.kt)("p",null,"\u9996\u90e8\u5b57\u6bb5 ",(0,l.kt)("inlineCode",{parentName:"p"},"Access-Control-Allow-Headers")," \u8868\u660e\u670d\u52a1\u5668\u5141\u8bb8\u8bf7\u6c42\u4e2d\u643a\u5e26\u5b57\u6bb5 ",(0,l.kt)("inlineCode",{parentName:"p"},"X-PINGOTHER")," \u4e0e ",(0,l.kt)("inlineCode",{parentName:"p"},"Content-Type"),"\u3002\u4e0e ",(0,l.kt)("inlineCode",{parentName:"p"},"Access-Control-Allow-Methods")," \u4e00\u6837\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"Access-Control-Allow-Headers")," \u7684\u503c\u4e3a\u9017\u53f7\u5206\u5272\u7684\u5217\u8868\u3002"),(0,l.kt)("p",null,"\u6700\u540e\uff0c\u9996\u90e8\u5b57\u6bb5 ",(0,l.kt)("inlineCode",{parentName:"p"},"Access-Control-Max-Age")," \u8868\u660e\u8be5\u54cd\u5e94\u7684\u6709\u6548\u65f6\u95f4\u4e3a 86400 \u79d2\uff0c\u4e5f\u5c31\u662f 24 \u5c0f\u65f6\u3002\u5728\u6709\u6548\u65f6\u95f4\u5185\uff0c\u6d4f\u89c8\u5668\u65e0\u987b\u4e3a\u540c\u4e00\u8bf7\u6c42\u518d\u6b21\u53d1\u8d77\u9884\u68c0\u8bf7\u6c42\u3002\u8bf7\u6ce8\u610f\uff0c\u6d4f\u89c8\u5668\u81ea\u8eab\u7ef4\u62a4\u4e86\u4e00\u4e2a ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Access-Control-Max-Age"},"\u6700\u5927\u6709\u6548\u65f6\u95f4"),"\uff0c\u5982\u679c\u8be5\u9996\u90e8\u5b57\u6bb5\u7684\u503c\u8d85\u8fc7\u4e86\u6700\u5927\u6709\u6548\u65f6\u95f4\uff0c\u5c06\u4e0d\u4f1a\u751f\u6548\u3002"),(0,l.kt)("details",null,(0,l.kt)("summary",null,(0,l.kt)(o.y,{color:"#25c2a0",mdxType:"Highlight"},"\u9884\u68c0\u8bf7\u6c42\u5b8c\u6210\u4e4b\u540e\uff0c\u53d1\u9001\u5b9e\u9645\u8bf7\u6c42")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-http"},"POST /doc HTTP/1.1\nHost: bar.other\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.14; rv:71.0) Gecko/20100101 Firefox/71.0\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nAccept-Language: en-us,en;q=0.5\nAccept-Encoding: gzip,deflate\nConnection: keep-alive\nX-PINGOTHER: pingpong\nContent-Type: text/xml; charset=UTF-8\nReferer: https://foo.example/examples/preflightInvocation.html\nContent-Length: 55\nOrigin: https://foo.example\nPragma: no-cache\nCache-Control: no-cache\n\n<person><name>Arun</name></person>\n\nHTTP/1.1 200 OK\nDate: Mon, 01 Dec 2008 01:15:40 GMT\nServer: Apache/2\nAccess-Control-Allow-Origin: https://foo.example\nVary: Accept-Encoding, Origin\nContent-Encoding: gzip\nContent-Length: 235\nKeep-Alive: timeout=2, max=99\nConnection: Keep-Alive\nContent-Type: text/plain\n\n[Some XML payload]\n"))),"#### \u9884\u68c0\u8bf7\u6c42\u4e0e\u91cd\u5b9a\u5411",(0,l.kt)("p",null,"\u5e76\u4e0d\u662f\u6240\u6709\u6d4f\u89c8\u5668\u90fd\u652f\u6301\u9884\u68c0\u8bf7\u6c42\u7684\u91cd\u5b9a\u5411\u3002\u5982\u679c\u4e00\u4e2a\u9884\u68c0\u8bf7\u6c42\u53d1\u751f\u4e86\u91cd\u5b9a\u5411\uff0c\u4e00\u90e8\u5206\u6d4f\u89c8\u5668\u5c06\u62a5\u544a\u9519\u8bef\uff1a"),(0,l.kt)("p",null,"CORS \u6700\u521d\u8981\u6c42\u6d4f\u89c8\u5668\u5177\u6709\u8be5\u884c\u4e3a\uff0c\u4e0d\u8fc7\u5728\u540e\u7eed\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/whatwg/fetch/commit/0d9a4db8bc02251cc9e391543bb3c1322fb882f2"},"\u4fee\u8ba2")," \u4e2d\u5e9f\u5f03\u4e86\u8fd9\u4e00\u8981\u6c42\u3002\u4f46\u5e76\u975e\u6240\u6709\u6d4f\u89c8\u5668\u90fd\u5b9e\u73b0\u4e86\u8fd9\u4e00\u53d8\u66f4\uff0c\u800c\u4ecd\u7136\u8868\u73b0\u51fa\u6700\u521d\u8981\u6c42\u7684\u884c\u4e3a\u3002"),(0,l.kt)("p",null,"\u5728\u6d4f\u89c8\u5668\u7684\u5b9e\u73b0\u8ddf\u4e0a\u89c4\u8303\u4e4b\u524d\uff0c\u6709\u4e24\u79cd\u65b9\u5f0f\u89c4\u907f\u4e0a\u8ff0\u62a5\u9519\u884c\u4e3a\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5728\u670d\u52a1\u7aef\u53bb\u6389\u5bf9\u9884\u68c0\u8bf7\u6c42\u7684\u91cd\u5b9a\u5411\uff1b"),(0,l.kt)("li",{parentName:"ul"},"\u5c06\u5b9e\u9645\u8bf7\u6c42\u53d8\u6210\u4e00\u4e2a",(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS#%E7%AE%80%E5%8D%95%E8%AF%B7%E6%B1%82"},"\u7b80\u5355\u8bf7\u6c42"),"\u3002")),(0,l.kt)("p",null,"\u5982\u679c\u4e0a\u9762\u4e24\u79cd\u65b9\u5f0f\u96be\u4ee5\u505a\u5230\uff0c\u6211\u4eec\u4ecd\u6709\u5176\u4ed6\u529e\u6cd5\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u53d1\u51fa\u4e00\u4e2a\u7b80\u5355\u8bf7\u6c42\uff08\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Response/url"},"Response.url")," \u6216 ",(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/responseURL"},"XHR.responseURL"),"\uff09\u4ee5\u5224\u65ad\u771f\u6b63\u7684\u9884\u68c0\u8bf7\u6c42\u4f1a\u8fd4\u56de\u4ec0\u4e48\u5730\u5740\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u53d1\u51fa\u53e6\u4e00\u4e2a\u8bf7\u6c42\uff08\u771f\u6b63\u7684\u8bf7\u6c42\uff09\uff0c\u4f7f\u7528\u5728\u4e0a\u4e00\u6b65\u901a\u8fc7 ",(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Response/url"},"Response.url")," \u6216 ",(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/responseURL"},"XMLHttpRequest.responseURL")," \u83b7\u5f97\u7684 URL\u3002")),(0,l.kt)("p",null,"\u4e0d\u8fc7\uff0c\u5982\u679c\u8bf7\u6c42\u662f\u7531\u4e8e\u5b58\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"Authorization")," \u5b57\u6bb5\u800c\u5f15\u53d1\u4e86\u9884\u68c0\u8bf7\u6c42\uff0c\u5219\u8fd9\u4e00\u65b9\u6cd5\u5c06\u65e0\u6cd5\u4f7f\u7528\u3002\u8fd9\u79cd\u60c5\u51b5\u53ea\u80fd\u7531\u670d\u52a1\u7aef\u8fdb\u884c\u66f4\u6539\u3002"),(0,l.kt)("h3",{id:"\u9644\u5e26\u8eab\u4efd\u51ed\u8bc1\u7684\u8bf7\u6c42"},"\u9644\u5e26\u8eab\u4efd\u51ed\u8bc1\u7684\u8bf7\u6c42"),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"}," \u5f53\u53d1\u51fa\u8de8\u6e90\u8bf7\u6c42\u65f6\uff0c\u7b2c\u4e09\u65b9 cookie \u7b56\u7565\u4ecd\u5c06\u9002\u7528\u3002\u65e0\u8bba\u5982\u4f55\u6539\u53d8\u672c\u7ae0\u8282\u4e2d\u63cf\u8ff0\u7684\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u7684\u8bbe\u7f6e\uff0c\u8be5\u7b56\u7565\u90fd\u4f1a\u5f3a\u5236\u6267\u884c\u3002")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest"},(0,l.kt)("inlineCode",{parentName:"a"},"XMLHttpRequest"))," \u6216 ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API"},"Fetch")," \u4e0e CORS \u7684\u4e00\u4e2a\u6709\u8da3\u7684\u7279\u6027\u662f\uff0c\u53ef\u4ee5\u57fa\u4e8e ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Cookies"},"HTTP cookies")," \u548c HTTP \u8ba4\u8bc1\u4fe1\u606f\u53d1\u9001\u8eab\u4efd\u51ed\u8bc1\u3002\u4e00\u822c\u800c\u8a00\uff0c\u5bf9\u4e8e\u8de8\u6e90 ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest"},(0,l.kt)("inlineCode",{parentName:"a"},"XMLHttpRequest"))," \u6216 ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API"},"Fetch")," \u8bf7\u6c42\uff0c\u6d4f\u89c8\u5668 ",(0,l.kt)("strong",{parentName:"p"},"\u4e0d\u4f1a")," \u53d1\u9001\u8eab\u4efd\u51ed\u8bc1\u4fe1\u606f\u3002\u5982\u679c\u8981\u53d1\u9001\u51ed\u8bc1\u4fe1\u606f\uff0c\u9700\u8981\u8bbe\u7f6e ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest"},(0,l.kt)("inlineCode",{parentName:"a"},"XMLHttpRequest"))," \u7684\u67d0\u4e2a\u7279\u6b8a\u6807\u5fd7\u4f4d\u3002"),(0,l.kt)("p",null,"\u672c\u4f8b\u4e2d\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"https://foo.example")," \u7684\u67d0\u811a\u672c\u5411 ",(0,l.kt)("inlineCode",{parentName:"p"},"https://bar.other")," \u53d1\u8d77\u4e00\u4e2a GET \u8bf7\u6c42\uff0c\u5e76\u8bbe\u7f6e Cookies\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const invocation = new XMLHttpRequest();\nconst url = 'https://bar.other/resources/credentialed-content/';\n\nfunction callOtherDomain() {\n  if (invocation) {\n    invocation.open('GET', url, true);\n    invocation.withCredentials = true;\n    invocation.onreadystatechange = handler;\n    invocation.send();\n  }\n}\n")),(0,l.kt)("p",null,"Copy to Clipboard"),(0,l.kt)("p",null,"\u7b2c 7 \u884c\u5c06 ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest"},(0,l.kt)("inlineCode",{parentName:"a"},"XMLHttpRequest"))," \u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"withCredentials")," \u6807\u5fd7\u8bbe\u7f6e\u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"true"),"\uff0c\u4ece\u800c\u5411\u670d\u52a1\u5668\u53d1\u9001 Cookies\u3002\u56e0\u4e3a\u8fd9\u662f\u4e00\u4e2a\u7b80\u5355 ",(0,l.kt)("inlineCode",{parentName:"p"},"GET")," \u8bf7\u6c42\uff0c\u6240\u4ee5\u6d4f\u89c8\u5668\u4e0d\u4f1a\u5bf9\u5176\u53d1\u8d77\u201c\u9884\u68c0\u8bf7\u6c42\u201d\u3002\u4f46\u662f\uff0c\u5982\u679c\u670d\u52a1\u5668\u7aef\u7684\u54cd\u5e94\u4e2d\u672a\u643a\u5e26 ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Access-Control-Allow-Credentials"},(0,l.kt)("inlineCode",{parentName:"a"},"Access-Control-Allow-Credentials")),(0,l.kt)("inlineCode",{parentName:"p"},": true"),"\uff0c\u6d4f\u89c8\u5668\u5c06\u4e0d\u4f1a\u628a\u54cd\u5e94\u5185\u5bb9\u8fd4\u56de\u7ed9\u8bf7\u6c42\u7684\u53d1\u9001\u8005\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"img",src:n(9525).Z,width:"1023",height:"490"})),(0,l.kt)("p",null,"\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u7aef\u4ea4\u4e92\u793a\u4f8b\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-http"},"GET /resources/credentialed-content/ HTTP/1.1\nHost: bar.other\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.14; rv:71.0) Gecko/20100101 Firefox/71.0\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nAccept-Language: en-us,en;q=0.5\nAccept-Encoding: gzip,deflate\nConnection: keep-alive\nReferer: https://foo.example/examples/credential.html\nOrigin: https://foo.example\nCookie: pageAccess=2\n\nHTTP/1.1 200 OK\nDate: Mon, 01 Dec 2008 01:34:52 GMT\nServer: Apache/2\nAccess-Control-Allow-Origin: https://foo.example\nAccess-Control-Allow-Credentials: true\nCache-Control: no-cache\nPragma: no-cache\nSet-Cookie: pageAccess=3; expires=Wed, 31-Dec-2008 01:34:53 GMT\nVary: Accept-Encoding, Origin\nContent-Encoding: gzip\nContent-Length: 106\nKeep-Alive: timeout=2, max=100\nConnection: Keep-Alive\nContent-Type: text/plain\n\n[text/plain payload]\n")),(0,l.kt)("p",null,"\u5373\u4f7f\u7b2c 10 \u884c\u6307\u5b9a\u4e86 Cookie \u7684\u76f8\u5173\u4fe1\u606f\uff0c\u4f46\u662f\uff0c\u5982\u679c ",(0,l.kt)("inlineCode",{parentName:"p"},"https://bar.other")," \u7684\u54cd\u5e94\u4e2d\u7f3a\u5931 ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Access-Control-Allow-Credentials"},(0,l.kt)("inlineCode",{parentName:"a"},"Access-Control-Allow-Credentials")),(0,l.kt)("inlineCode",{parentName:"p"},": true"),"\uff08\u7b2c 17 \u884c\uff09\uff0c\u5219\u54cd\u5e94\u5185\u5bb9\u4e0d\u4f1a\u8fd4\u56de\u7ed9\u8bf7\u6c42\u7684\u53d1\u8d77\u8005\u3002"),(0,l.kt)("h4",{id:"\u9884\u68c0\u8bf7\u6c42\u548c\u51ed\u636e"},"\u9884\u68c0\u8bf7\u6c42\u548c\u51ed\u636e"),(0,l.kt)("p",null,"CORS \u9884\u68c0\u8bf7\u6c42\u4e0d\u80fd\u5305\u542b\u51ed\u636e\u3002\u9884\u68c0\u8bf7\u6c42\u7684 ",(0,l.kt)("em",{parentName:"p"},"\u54cd\u5e94")," \u5fc5\u987b\u6307\u5b9a ",(0,l.kt)("inlineCode",{parentName:"p"},"Access-Control-Allow-Credentials: true")," \u6765\u8868\u660e\u53ef\u4ee5\u643a\u5e26\u51ed\u636e\u8fdb\u884c\u5b9e\u9645\u7684\u8bf7\u6c42\u3002"),(0,l.kt)("h4",{id:"\u9644\u5e26\u8eab\u4efd\u51ed\u8bc1\u7684\u8bf7\u6c42\u4e0e\u901a\u914d\u7b26"},"\u9644\u5e26\u8eab\u4efd\u51ed\u8bc1\u7684\u8bf7\u6c42\u4e0e\u901a\u914d\u7b26"),(0,l.kt)("p",null,"\u5728\u54cd\u5e94\u9644\u5e26\u8eab\u4efd\u51ed\u8bc1\u7684\u8bf7\u6c42\u65f6\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u670d\u52a1\u5668\u4e0d\u80fd\u5c06 ",(0,l.kt)("inlineCode",{parentName:"li"},"Access-Control-Allow-Origin")," \u7684\u503c\u8bbe\u4e3a\u901a\u914d\u7b26\u201c",(0,l.kt)("inlineCode",{parentName:"li"},"*"),"\u201d\uff0c\u800c\u5e94\u5c06\u5176\u8bbe\u7f6e\u4e3a\u7279\u5b9a\u7684\u57df\uff0c\u5982\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"Access-Control-Allow-Origin: https://example.com"),"\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u670d\u52a1\u5668\u4e0d\u80fd\u5c06 ",(0,l.kt)("inlineCode",{parentName:"li"},"Access-Control-Allow-Headers")," \u7684\u503c\u8bbe\u4e3a\u901a\u914d\u7b26\u201c",(0,l.kt)("inlineCode",{parentName:"li"},"*"),"\u201d\uff0c\u800c\u5e94\u5c06\u5176\u8bbe\u7f6e\u4e3a\u9996\u90e8\u540d\u79f0\u7684\u5217\u8868\uff0c\u5982\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"Access-Control-Allow-Headers: X-PINGOTHER, Content-Type")),(0,l.kt)("li",{parentName:"ul"},"\u670d\u52a1\u5668\u4e0d\u80fd\u5c06 ",(0,l.kt)("inlineCode",{parentName:"li"},"Access-Control-Allow-Methods")," \u7684\u503c\u8bbe\u4e3a\u901a\u914d\u7b26\u201c",(0,l.kt)("inlineCode",{parentName:"li"},"*"),"\u201d\uff0c\u800c\u5e94\u5c06\u5176\u8bbe\u7f6e\u4e3a\u7279\u5b9a\u8bf7\u6c42\u65b9\u6cd5\u540d\u79f0\u7684\u5217\u8868\uff0c\u5982\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"Access-Control-Allow-Methods: POST, GET"))),(0,l.kt)("p",null,"\u5bf9\u4e8e\u9644\u5e26\u8eab\u4efd\u51ed\u8bc1\u7684\u8bf7\u6c42\uff08\u901a\u5e38\u662f ",(0,l.kt)("inlineCode",{parentName:"p"},"Cookie"),"\uff09\uff0c\u670d\u52a1\u5668\u4e0d\u5f97\u8bbe\u7f6e ",(0,l.kt)("inlineCode",{parentName:"p"},"Access-Control-Allow-Origin")," \u7684\u503c\u4e3a\u201c",(0,l.kt)("inlineCode",{parentName:"p"},"*"),"\u201d\u3002"),(0,l.kt)("p",null,"\u8fd9\u662f\u56e0\u4e3a\u8bf7\u6c42\u7684\u9996\u90e8\u4e2d\u643a\u5e26\u4e86 ",(0,l.kt)("inlineCode",{parentName:"p"},"Cookie")," \u4fe1\u606f\uff0c\u5982\u679c ",(0,l.kt)("inlineCode",{parentName:"p"},"Access-Control-Allow-Origin")," \u7684\u503c\u4e3a\u201c",(0,l.kt)("inlineCode",{parentName:"p"},"*"),"\u201d\uff0c\u8bf7\u6c42\u5c06\u4f1a\u5931\u8d25\u3002\u800c\u5c06 ",(0,l.kt)("inlineCode",{parentName:"p"},"Access-Control-Allow-Origin")," \u7684\u503c\u8bbe\u7f6e\u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"https://example.com"),"\uff0c\u5219\u8bf7\u6c42\u5c06\u6210\u529f\u6267\u884c\u3002"),(0,l.kt)("p",null,"\u53e6\u5916\uff0c\u54cd\u5e94\u9996\u90e8\u4e2d\u4e5f\u643a\u5e26\u4e86 ",(0,l.kt)("inlineCode",{parentName:"p"},"Set-Cookie")," \u5b57\u6bb5\uff0c\u5c1d\u8bd5\u5bf9 Cookie \u8fdb\u884c\u4fee\u6539\u3002\u5982\u679c\u64cd\u4f5c\u5931\u8d25\uff0c\u5c06\u4f1a\u629b\u51fa\u5f02\u5e38\u3002"),(0,l.kt)("h4",{id:"\u7b2c\u4e09\u65b9-cookies"},"\u7b2c\u4e09\u65b9 cookies"),(0,l.kt)("p",null,"\u6ce8\u610f\u5728 CORS \u54cd\u5e94\u4e2d\u8bbe\u7f6e\u7684 cookies \u9002\u7528\u4e00\u822c\u6027\u7b2c\u4e09\u65b9 cookie \u7b56\u7565\u3002\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u9875\u9762\u662f\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"foo.example")," \u52a0\u8f7d\uff0c\u4f46\u662f\u7b2c 20 \u884c\u7684 cookie \u662f\u88ab ",(0,l.kt)("inlineCode",{parentName:"p"},"bar.other")," \u53d1\u9001\u7684\uff0c\u5982\u679c\u7528\u6237\u8bbe\u7f6e\u5176\u6d4f\u89c8\u5668\u62d2\u7edd\u6240\u6709\u7b2c\u4e09\u65b9 cookies\uff0c\u90a3\u4e48\u5c06\u4e0d\u4f1a\u88ab\u4fdd\u5b58\u3002"),(0,l.kt)("p",null,"\u8bf7\u6c42\u4e2d\u7684 cookie\uff08\u7b2c 10 \u884c\uff09\u4e5f\u53ef\u80fd\u5728\u6b63\u5e38\u7684\u7b2c\u4e09\u65b9 cookie \u7b56\u7565\u4e0b\u88ab\u963b\u6b62\u3002\u56e0\u6b64\uff0c\u5f3a\u5236\u6267\u884c\u7684 cookie \u7b56\u7565\u53ef\u80fd\u4f1a\u4f7f\u672c\u8282\u63cf\u8ff0\u7684\u5185\u5bb9\u65e0\u6548\uff08\u963b\u6b62\u4f60\u53d1\u51fa\u4efb\u4f55\u643a\u5e26\u51ed\u636e\u7684\u8bf7\u6c42\uff09\u3002"),(0,l.kt)("p",null,"Cookie \u7b56\u7565\u53d7 ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Set-Cookie/SameSite"},"SameSite")," \u5c5e\u6027\u63a7\u5236\u3002"),(0,l.kt)("h2",{id:"http-\u54cd\u5e94\u9996\u90e8\u5b57\u6bb5"},"HTTP \u54cd\u5e94\u9996\u90e8\u5b57\u6bb5"),(0,l.kt)("p",null,"\u672c\u8282\u5217\u51fa\u4e86\u89c4\u8303\u6240\u5b9a\u4e49\u7684\u54cd\u5e94\u9996\u90e8\u5b57\u6bb5\u3002\u4e0a\u4e00\u5c0f\u8282\u4e2d\uff0c\u6211\u4eec\u5df2\u7ecf\u770b\u5230\u4e86\u8fd9\u4e9b\u9996\u90e8\u5b57\u6bb5\u5728\u5b9e\u9645\u573a\u666f\u4e2d\u662f\u5982\u4f55\u5de5\u4f5c\u7684\u3002"),(0,l.kt)("h3",{id:"access-control-allow-origin"},"Access-Control-Allow-Origin"),(0,l.kt)("p",null,"\u54cd\u5e94\u9996\u90e8\u4e2d\u53ef\u4ee5\u643a\u5e26\u4e00\u4e2a ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Access-Control-Allow-Origin"},(0,l.kt)("inlineCode",{parentName:"a"},"Access-Control-Allow-Origin"))," \u5b57\u6bb5\uff0c\u5176\u8bed\u6cd5\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-http"},"Access-Control-Allow-Origin: <origin> | *\n")),(0,l.kt)("p",null,"\u5176\u4e2d\uff0corigin \u53c2\u6570\u7684\u503c\u6307\u5b9a\u4e86\u5141\u8bb8\u8bbf\u95ee\u8be5\u8d44\u6e90\u7684\u5916\u57df URI\u3002\u5bf9\u4e8e\u4e0d\u9700\u8981\u643a\u5e26\u8eab\u4efd\u51ed\u8bc1\u7684\u8bf7\u6c42\uff0c\u670d\u52a1\u5668\u53ef\u4ee5\u6307\u5b9a\u8be5\u5b57\u6bb5\u7684\u503c\u4e3a\u901a\u914d\u7b26\uff0c\u8868\u793a\u5141\u8bb8\u6765\u81ea\u6240\u6709\u57df\u7684\u8bf7\u6c42\u3002"),(0,l.kt)("p",null,"\u4f8b\u5982\uff0c\u4e0b\u9762\u7684\u5b57\u6bb5\u503c\u5c06\u5141\u8bb8\u6765\u81ea ",(0,l.kt)("inlineCode",{parentName:"p"},"https://mozilla.org")," \u7684\u8bf7\u6c42\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-http"},"Access-Control-Allow-Origin: https://mozilla.org\nVary: Origin\n")),(0,l.kt)("p",null,"\u5982\u679c\u670d\u52a1\u7aef\u6307\u5b9a\u4e86\u5177\u4f53\u7684\u57df\u540d\u800c\u975e\u201c*\u201d\uff0c\u90a3\u4e48\u54cd\u5e94\u9996\u90e8\u4e2d\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Vary"},(0,l.kt)("inlineCode",{parentName:"a"},"Vary"))," \u5b57\u6bb5\u7684\u503c\u5fc5\u987b\u5305\u542b ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Origin"},(0,l.kt)("inlineCode",{parentName:"a"},"Origin")),"\u3002\u8fd9\u5c06\u544a\u8bc9\u5ba2\u6237\u7aef\uff1a\u670d\u52a1\u5668\u5bf9\u4e0d\u540c\u7684\u6e90\u7ad9\u8fd4\u56de\u4e0d\u540c\u7684\u5185\u5bb9\u3002"),(0,l.kt)("h3",{id:"access-control-expose-headers"},"Access-Control-Expose-Headers"),(0,l.kt)("p",null,"\u8bd1\u8005\u6ce8\uff1a\u5728\u8de8\u6e90\u8bbf\u95ee\u65f6\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"XMLHttpRequest")," \u5bf9\u8c61\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/getResponseHeader"},(0,l.kt)("inlineCode",{parentName:"a"},"getResponseHeader()"))," \u65b9\u6cd5\u53ea\u80fd\u62ff\u5230\u4e00\u4e9b\u6700\u57fa\u672c\u7684\u54cd\u5e94\u5934\uff0cCache-Control\u3001Content-Language\u3001Content-Type\u3001Expires\u3001Last-Modified\u3001Pragma\uff0c\u5982\u679c\u8981\u8bbf\u95ee\u5176\u4ed6\u5934\uff0c\u5219\u9700\u8981\u670d\u52a1\u5668\u8bbe\u7f6e\u672c\u54cd\u5e94\u5934\u3002"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Access-Control-Expose-Headers"},(0,l.kt)("inlineCode",{parentName:"a"},"Access-Control-Expose-Headers"))," \u5934\u8ba9\u670d\u52a1\u5668\u628a\u5141\u8bb8\u6d4f\u89c8\u5668\u8bbf\u95ee\u7684\u5934\u653e\u5165\u767d\u540d\u5355\uff0c\u4f8b\u5982\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-http"},"Access-Control-Expose-Headers: X-My-Custom-Header, X-Another-Custom-Header\n")),(0,l.kt)("p",null,"\u8fd9\u6837\u6d4f\u89c8\u5668\u5c31\u80fd\u591f\u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"p"},"getResponseHeader")," \u8bbf\u95ee ",(0,l.kt)("inlineCode",{parentName:"p"},"X-My-Custom-Header")," \u548c ",(0,l.kt)("inlineCode",{parentName:"p"},"X-Another-Custom-Header")," \u54cd\u5e94\u5934\u4e86\u3002"),(0,l.kt)("h3",{id:"access-control-max-age"},"Access-Control-Max-Age"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Access-Control-Max-Age"},(0,l.kt)("inlineCode",{parentName:"a"},"Access-Control-Max-Age"))," \u5934\u6307\u5b9a\u4e86 preflight \u8bf7\u6c42\u7684\u7ed3\u679c\u80fd\u591f\u88ab\u7f13\u5b58\u591a\u4e45\uff0c\u8bf7\u53c2\u8003\u672c\u6587\u5728\u524d\u9762\u63d0\u5230\u7684 preflight \u4f8b\u5b50\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-http"},"Access-Control-Max-Age: <delta-seconds>\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"delta-seconds")," \u53c2\u6570\u8868\u793a preflight \u9884\u68c0\u8bf7\u6c42\u7684\u7ed3\u679c\u5728\u591a\u5c11\u79d2\u5185\u6709\u6548\u3002"),(0,l.kt)("h3",{id:"access-control-allow-credentials"},"Access-Control-Allow-Credentials"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Access-Control-Allow-Credentials"},(0,l.kt)("inlineCode",{parentName:"a"},"Access-Control-Allow-Credentials"))," \u5934\u6307\u5b9a\u4e86\u5f53\u6d4f\u89c8\u5668\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"credentials")," \u8bbe\u7f6e\u4e3a true \u65f6\u662f\u5426\u5141\u8bb8\u6d4f\u89c8\u5668\u8bfb\u53d6 response \u7684\u5185\u5bb9\u3002\u5f53\u7528\u5728\u5bf9 preflight \u9884\u68c0\u6d4b\u8bf7\u6c42\u7684\u54cd\u5e94\u4e2d\u65f6\uff0c\u5b83\u6307\u5b9a\u4e86\u5b9e\u9645\u7684\u8bf7\u6c42\u662f\u5426\u53ef\u4ee5\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"credentials"),"\u3002\u8bf7\u6ce8\u610f\uff1a\u7b80\u5355 ",(0,l.kt)("inlineCode",{parentName:"p"},"GET")," \u8bf7\u6c42\u4e0d\u4f1a\u88ab\u9884\u68c0\uff1b\u5982\u679c\u5bf9\u6b64\u7c7b\u8bf7\u6c42\u7684\u54cd\u5e94\u4e2d\u4e0d\u5305\u542b\u8be5\u5b57\u6bb5\uff0c\u8fd9\u4e2a\u54cd\u5e94\u5c06\u88ab\u5ffd\u7565\u6389\uff0c\u5e76\u4e14\u6d4f\u89c8\u5668\u4e5f\u4e0d\u4f1a\u5c06\u76f8\u5e94\u5185\u5bb9\u8fd4\u56de\u7ed9\u7f51\u9875\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-http"},"Access-Control-Allow-Credentials: true\n")),(0,l.kt)("p",null,"\u4e0a\u6587\u5df2\u7ecf\u8ba8\u8bba\u4e86",(0,l.kt)("inlineCode",{parentName:"p"},"\u9644\u5e26\u8eab\u4efd\u51ed\u8bc1\u7684\u8bf7\u6c42")),(0,l.kt)("h3",{id:"access-control-allow-methods"},"Access-Control-Allow-Methods"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Access-Control-Allow-Methods"},(0,l.kt)("inlineCode",{parentName:"a"},"Access-Control-Allow-Methods"))," \u9996\u90e8\u5b57\u6bb5\u7528\u4e8e\u9884\u68c0\u8bf7\u6c42\u7684\u54cd\u5e94\u3002\u5176\u6307\u660e\u4e86\u5b9e\u9645\u8bf7\u6c42\u6240\u5141\u8bb8\u4f7f\u7528\u7684 HTTP \u65b9\u6cd5\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-http"},"Access-Control-Allow-Methods: <method>[, <method>]*\n")),(0,l.kt)("p",null,"\u6709\u5173 ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Glossary/Preflight_request"},"preflight request")," \u7684\u793a\u4f8b\u5df2\u5728\u4e0a\u65b9\u7ed9\u51fa\u3002"),(0,l.kt)("h3",{id:"access-control-allow-headers"},"Access-Control-Allow-Headers"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Access-Control-Allow-Headers"},(0,l.kt)("inlineCode",{parentName:"a"},"Access-Control-Allow-Headers"))," \u9996\u90e8\u5b57\u6bb5\u7528\u4e8e\u9884\u68c0\u8bf7\u6c42\u7684\u54cd\u5e94\u3002\u5176\u6307\u660e\u4e86\u5b9e\u9645\u8bf7\u6c42\u4e2d\u5141\u8bb8\u643a\u5e26\u7684\u9996\u90e8\u5b57\u6bb5\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-http"},"Access-Control-Allow-Headers: <field-name>[, <field-name>]*\n")),(0,l.kt)("h2",{id:"http-\u8bf7\u6c42\u9996\u90e8\u5b57\u6bb5"},"HTTP \u8bf7\u6c42\u9996\u90e8\u5b57\u6bb5"),(0,l.kt)("h3",{id:"origin"},(0,l.kt)("a",{parentName:"h3",href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS#origin"},"Origin")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Origin"},(0,l.kt)("inlineCode",{parentName:"a"},"Origin"))," \u9996\u90e8\u5b57\u6bb5\u8868\u660e\u9884\u68c0\u8bf7\u6c42\u6216\u5b9e\u9645\u8bf7\u6c42\u7684\u6e90\u7ad9\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-http"},"Origin: <origin>\n")),(0,l.kt)("p",null,"origin \u53c2\u6570\u7684\u503c\u4e3a\u6e90\u7ad9 URI\u3002\u5b83\u4e0d\u5305\u542b\u4efb\u4f55\u8def\u5f84\u4fe1\u606f\uff0c\u53ea\u662f\u670d\u52a1\u5668\u540d\u79f0"),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"\u6709\u65f6\u5019\u5c06\u8be5\u5b57\u6bb5\u7684\u503c\u8bbe\u7f6e\u4e3a\u7a7a\u5b57\u7b26\u4e32\u662f\u6709\u7528\u7684\uff0c\u4f8b\u5982\uff0c\u5f53\u6e90\u7ad9\u662f\u4e00\u4e2a data URL \u65f6\u3002")),(0,l.kt)("admonition",{type:"caution"},(0,l.kt)("p",{parentName:"admonition"},"\u5728\u6240\u6709\u8bbf\u95ee\u63a7\u5236\u8bf7\u6c42\uff08Access control request\uff09\u4e2d\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"Origin"),"\u9996\u90e8\u5b57\u6bb5 ",(0,l.kt)("strong",{parentName:"p"},"\u603b\u662f")," \u88ab\u53d1\u9001\u3002")),(0,l.kt)("h3",{id:"access-control-request-method"},"Access-Control-Request-Method"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Access-Control-Request-Method")," \u9996\u90e8\u5b57\u6bb5\u7528\u4e8e\u9884\u68c0\u8bf7\u6c42\u3002\u5176\u4f5c\u7528\u662f\uff0c\u5c06\u5b9e\u9645\u8bf7\u6c42\u6240\u4f7f\u7528\u7684 HTTP \u65b9\u6cd5\u544a\u8bc9\u670d\u52a1\u5668\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-http"},"Access-Control-Request-Method: <method>\n")),(0,l.kt)("h3",{id:"access-control-request-headers"},"Access-Control-Request-Headers"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Access-Control-Request-Headers")," \u9996\u90e8\u5b57\u6bb5\u7528\u4e8e\u9884\u68c0\u8bf7\u6c42\u3002\u5176\u4f5c\u7528\u662f\uff0c\u5c06\u5b9e\u9645\u8bf7\u6c42\u6240\u643a\u5e26\u7684\u9996\u90e8\u5b57\u6bb5\u544a\u8bc9\u670d\u52a1\u5668\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-http"},"Access-Control-Request-Headers: <field-name>[, <field-name>]*\n")),(0,l.kt)("h2",{id:"\u89c4\u8303"},"\u89c4\u8303"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Specification"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Status"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Comment"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("a",{parentName:"td",href:"https://fetch.spec.whatwg.org/#cors-protocol"},"Fetch CORS")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Living Standard"),(0,l.kt)("td",{parentName:"tr",align:"left"},"New definition; supplants ",(0,l.kt)("a",{parentName:"td",href:"https://www.w3.org/TR/cors/"},"W3C CORS")," specification.")))),(0,l.kt)("h2",{id:"\u6d4f\u89c8\u5668\u517c\u5bb9\u6027"},"\u6d4f\u89c8\u5668\u517c\u5bb9\u6027"),(0,l.kt)("p",null,"[Report problems with this compatibility data on GitHub]","(",(0,l.kt)("a",{parentName:"p",href:"https://github.com/mdn/browser-compat-data/issues/new?mdn-url=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FHTTP%2FCORS&metadata="},"https://github.com/mdn/browser-compat-data/issues/new?mdn-url=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FHTTP%2FCORS&metadata=")," MDN+page+report+details<%2Fsummary> ",(0,l.kt)("em",{parentName:"p"},"+Query%3A+",(0,l.kt)("inlineCode",{parentName:"em"},"http.headers.Access-Control-Allow-Origin")," "),"+Report+started%3A+2022-07-22T08%3A11%3A15.352Z <%2Fdetails>&title=http.headers.Access-Control-Allow-Origin+-+&template=data-problem.yml)"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"image-20220722161529269",src:n(1330).Z,width:"777",height:"302"})))}m.isMDXComponent=!0},7118:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/cors_principle-72a45880293d7f645ac9d0359339c81d.png"},9525:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/cred-req-updated-deeb84157fba05b4b894c4f08d95df98.png"},1330:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/image-20220722161529269-8c232c4edd4c09567b15f2b0eb5d2b17.png"},2376:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/preflight_correct-fa2e09b65a68a391644c153bfd3202ca.png"}}]);